<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Han,Hiragana,Katakana,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>OpenID Connect Advanced Syntax for Claims (ASC) 1.0</title>
<meta content="Daniel Fett" name="author">
<meta content='
       This specification defines an extension of OpenID Connect to enable new features for requesting and receiving Claims and meta-information about Claims.  There are two components that can be implemented independently or together, "Selective Abort and Omit" and "Transformed Claims".  These components enable additional data minimization requirements to be expressed between the Relying Party and the Identity Provider thus helping both parties comply with business requirements, policies and regulatory requirements relating to limiting data being transferred to that which is needed. 
    ' name="description">
<meta content="xml2rfc 3.20.0" name="generator">
<meta content="openid" name="keyword">
<meta content="identity assurance" name="keyword">
<meta content="ekyc" name="keyword">
<meta content="asc" name="keyword">
<meta content="data minimization" name="keyword">
<meta content="openid-connect-advanced-syntax-for-claims-1_0-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.20.0
    Python 3.10.12
    ConfigArgParse 1.7
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.3
    lxml 4.9.4
    platformdirs 4.2.0
    pycountry 23.12.11
    PyYAML 6.0.1
    requests 2.31.0
    setuptools 69.1.1
    six 1.16.0
    wcwidth 0.2.13
    weasyprint 61.2
-->
<link href="openid-advanced-syntax-for-claims.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body class="xml2rfc">
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left"></td>
<td class="center">openid-connect-asc-1_0</td>
<td class="right">October 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Fett</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">eKYC-IDA</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-10-01" class="published">1 October 2024</time>
    </dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">D. Fett</div>
<div class="org">Authlete</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">OpenID Connect Advanced Syntax for Claims (ASC) 1.0</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This specification defines an extension of OpenID Connect to enable new features for requesting and receiving Claims and meta-information about Claims.  There are two components that can be implemented independently or together, "Selective Abort and Omit" and "Transformed Claims".  These components enable additional data minimization requirements to be expressed between the Relying Party and the Identity Provider thus helping both parties comply with business requirements, policies and regulatory requirements relating to limiting data being transferred to that which is needed.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-warning" class="internal xref">Warning</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-notational-conventions" class="internal xref">Notational conventions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-scope" class="internal xref">Scope</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-normative-references" class="internal xref">Normative references</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-terms-and-definitions" class="internal xref">Terms and definitions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-claim" class="internal xref">claim</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-openid-provider" class="internal xref">OpenID provider</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-relying-party" class="internal xref">relying party</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-selective-abort-omit" class="internal xref">Selective Abort/Omit</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-example" class="internal xref">Example</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-syntax-and-processing" class="internal xref">Syntax and Processing</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="auto internal xref">7.2.1</a>.  <a href="#name-interoperability-with-oidc-" class="internal xref">Interoperability with OIDC Rules</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-op-metadata" class="internal xref">OP Metadata</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-privacy-considerations" class="internal xref">Privacy Considerations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="auto internal xref">7.5</a>.  <a href="#name-compatibility-consideration" class="internal xref">Compatibility Considerations</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-transformed-claims" class="internal xref">Transformed Claims</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-example-age-verification" class="internal xref">Example: Age Verification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-defining-transformed-claims" class="internal xref">Defining Transformed Claims</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.1">
                    <p id="section-toc.1-1.8.2.2.2.1.1"><a href="#section-8.2.1" class="auto internal xref">8.2.1</a>.  <a href="#name-requesting-transformed-clai" class="internal xref">Requesting Transformed Claims</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.2">
                    <p id="section-toc.1-1.8.2.2.2.2.1"><a href="#section-8.2.2" class="auto internal xref">8.2.2</a>.  <a href="#name-combination-with-selective-" class="internal xref">Combination with Selective Abort/Omit</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-data-types" class="internal xref">Data Types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="auto internal xref">8.4</a>.  <a href="#name-transformation-functions" class="internal xref">Transformation Functions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.1">
                    <p id="section-toc.1-1.8.2.4.2.1.1"><a href="#section-8.4.1" class="auto internal xref">8.4.1</a>.  <a href="#name-counting-years" class="internal xref">Counting Years</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.2">
                    <p id="section-toc.1-1.8.2.4.2.2.1"><a href="#section-8.4.2" class="auto internal xref">8.4.2</a>.  <a href="#name-equality" class="internal xref">Equality</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.3">
                    <p id="section-toc.1-1.8.2.4.2.3.1"><a href="#section-8.4.3" class="auto internal xref">8.4.3</a>.  <a href="#name-number-date-datetime-compar" class="internal xref">Number/Date/Datetime Comparison</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.4">
                    <p id="section-toc.1-1.8.2.4.2.4.1"><a href="#section-8.4.4" class="auto internal xref">8.4.4</a>.  <a href="#name-hashing" class="internal xref">Hashing</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.5">
                    <p id="section-toc.1-1.8.2.4.2.5.1"><a href="#section-8.4.5" class="auto internal xref">8.4.5</a>.  <a href="#name-array-evaluation" class="internal xref">Array Evaluation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.6">
                    <p id="section-toc.1-1.8.2.4.2.6.1"><a href="#section-8.4.6" class="auto internal xref">8.4.6</a>.  <a href="#name-json-object-access" class="internal xref">JSON Object Access</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.7">
                    <p id="section-toc.1-1.8.2.4.2.7.1"><a href="#section-8.4.7" class="auto internal xref">8.4.7</a>.  <a href="#name-matching" class="internal xref">Matching</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4.2.8">
                    <p id="section-toc.1-1.8.2.4.2.8.1"><a href="#section-8.4.8" class="auto internal xref">8.4.8</a>.  <a href="#name-extending-the-transformatio" class="internal xref">Extending the Transformation Functions</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.5">
                <p id="section-toc.1-1.8.2.5.1"><a href="#section-8.5" class="auto internal xref">8.5</a>.  <a href="#name-predefined-transformed-clai" class="internal xref">Predefined Transformed Claims (PTC)</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.6">
                <p id="section-toc.1-1.8.2.6.1"><a href="#section-8.6" class="auto internal xref">8.6</a>.  <a href="#name-op-metadata-2" class="internal xref">OP Metadata</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.7">
                <p id="section-toc.1-1.8.2.7.1"><a href="#section-8.7" class="auto internal xref">8.7</a>.  <a href="#name-error-conditions" class="internal xref">Error Conditions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.8">
                <p id="section-toc.1-1.8.2.8.1"><a href="#section-8.8" class="auto internal xref">8.8</a>.  <a href="#name-ux-and-privacy-consideratio" class="internal xref">UX and Privacy Considerations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.9">
                <p id="section-toc.1-1.8.2.9.1"><a href="#section-8.9" class="auto internal xref">8.9</a>.  <a href="#name-compatibility-considerations" class="internal xref">Compatibility Considerations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.10">
                <p id="section-toc.1-1.8.2.10.1"><a href="#section-8.10" class="auto internal xref">8.10</a>. <a href="#name-examples" class="internal xref">Examples</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-integrity-protection-of-the" class="internal xref">Integrity Protection of the Authentication Request</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-safe-execution-of-transform" class="internal xref">Safe Execution of Transformation Functions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-normative-references-2" class="internal xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-translation-references" class="internal xref">Translation References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-notices" class="internal xref">Notices</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.  <a href="#name-document-history" class="internal xref">Document History</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-D" class="auto internal xref">Appendix D</a>.  <a href="#name-translator" class="internal xref">Translator</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">When using OpenID Connect there are two existing mechanisms to limit the data returned.  These are through the use of the <code>scope</code> parameter (where a predefined set of claims may be described) or the <code>claims</code> parameter where individual claims can be requested explicitly. The OpenID Provider in these cases may return some or all of the requested claims dependent on availability, end-user approval or some other policy.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">With OpenID Connect Advanced Syntax for Claims (ASC) two further tools are made available to implementers.  The "Selective Abort and Omit" feature allows the Relying Party to express to the Identity Provider certain conditions when it might like some subset or perhaps all of the requested claims to be not returned. This is provided to allow for cases where when one or more key attributes are unavailable then the rest are insufficient to meet the business requirement and reduced return of data is better than incomplete data. With the "Transformed Claims" feature a general purpose way of taking an existing "base claim" and applying functions to it is provided.  This capability was inspired by the age verification use case where the full <code>birthdate</code> is not needed to satisfy the business requirement and would not meet the principle of data minimization. With Transformed Claims it is possible to transform claims in various ways either by applying one or more functions to the value of a claim.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">In the case of age verification, <code>birthdate</code> is transformed to <code>age is greater than or equal to x</code> but it is also possible to express <code>postcode contains "EH1"</code>  or <code>end-user nationality includes "USA"</code> meeting the business and policy requirements of Relying Parties much more effectively.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">With these two capabilities it is possible for the relying party to be highly specific about what the claims returned should be, that some of those claims should be data minimized, and in which circumstances claims should or should not be returned.<a href="#section-1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="warning">
<section id="section-2">
      <h2 id="name-warning">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-warning" class="section-name selfRef">Warning</a>
      </h2>
<p id="section-2-1">This document is not an OIDF International Standard. It is distributed for review and comment. It is subject to change without notice and may not be referred to as an International Standard.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">Recipients of this draft are invited to submit, with their comments, notification of any relevant patent rights of which they are aware and to provide supporting documentation.<a href="#section-2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="notational-conventions">
<section id="section-3">
      <h2 id="name-notational-conventions">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational conventions</a>
      </h2>
<p id="section-3-1">The keywords "shall", "shall not", "should", "should not", "may", and "can" in this document are to be interpreted as described in ISO Directive Part 2 <span>[<a href="#ISODIR2" class="cite xref">ISODIR2</a>]</span>. These keywords are not used as dictionary terms such that any occurrence of them shall be interpreted as keywords and are not to be interpreted with their natural language meanings.<a href="#section-3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="scope">
<section id="section-4">
      <h2 id="name-scope">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-scope" class="section-name selfRef">Scope</a>
      </h2>
<p id="section-4-1">This specification is based on OpenID Connect Core <span>[<a href="#OpenID" class="cite xref">OpenID</a>]</span> and defines the
technical mechanisms to allow Relying Parties present "Selective Abort and Omit" (SAO)
conditions and to request "Transformed Claims" (TC).  The specification also allows
implementers the choice to implement each feature in isolation or in conjunction
depending on their requirements, provides options for restricted
implementations, provides features for communication of these capabilities to
Relying Parties and includes examples of how both features may be used.<a href="#section-4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="normative-references">
<section id="section-5">
      <h2 id="name-normative-references">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-normative-references" class="section-name selfRef">Normative references</a>
      </h2>
<p id="section-5-1">Normative References については Section 13 参照．<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terms-and-definitions">
<section id="section-6">
      <h2 id="name-terms-and-definitions">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-terms-and-definitions" class="section-name selfRef">Terms and definitions</a>
      </h2>
<p id="section-6-1">このドキュメントでは，以下の用語と定義を適用する．<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="claim">
<section id="section-6.1">
        <h3 id="name-claim">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-claim" class="section-name selfRef">claim</a>
        </h3>
<p id="section-6.1-1">Entity に関する情報の部分集合.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">[SOURCE: <span>[<a href="#OpenID" class="cite xref">OpenID</a>]</span>, 1.2]<a href="#section-6.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="openid-provider">
<section id="section-6.2">
        <h3 id="name-openid-provider">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-openid-provider" class="section-name selfRef">OpenID provider</a>
        </h3>
<p id="section-6.2-1">OAuth 2.0 Authorization Server that is capable of Authenticating the End-User and providing Claims to a Relying Party about the Authentication event and the End-User. Also referred to as OP or identity provider<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">[SOURCE: <span>[<a href="#OpenID" class="cite xref">OpenID</a>]</span>, 1.2]<a href="#section-6.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="relying-party">
<section id="section-6.3">
        <h3 id="name-relying-party">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-relying-party" class="section-name selfRef">relying party</a>
        </h3>
<p id="section-6.3-1">OAuth 2.0 Client application requiring End-User Authentication and Claims from an OpenID Provider. Also referred to as RP<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">[SOURCE: <span>[<a href="#OpenID" class="cite xref">OpenID</a>]</span>, 1.2]<a href="#section-6.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="selective-abort-omit">
<section id="section-7">
      <h2 id="name-selective-abort-omit">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-selective-abort-omit" class="section-name selfRef">Selective Abort/Omit</a>
      </h2>
<p id="section-7-1">Using Selective Abort/Omit (SAO), an RP can define the expected behavior of an
OP when certain data is not available, when a user does not consent to the
release of the data, or when restrictions defined on claims using <code>value</code> or
<code>values</code> cannot be fulfilled. It supports a lightweight extension of existing
OpenID Connect features as well as more complex cases by allowing matching of
claims structures against JSON Schemas.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Note: SAO is in particular useful when some of the claims (e.g., verified
claims) are priced and the RP is only interested to pay for the respective
claims if certain conditions are met.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">This feature is fully independent from the use of <code>essential</code> as defined in
Section 5.5 of <span>[<a href="#OpenID" class="cite xref">OpenID</a>]</span>.<a href="#section-7-3" class="pilcrow">¶</a></p>
<div id="example">
<section id="section-7.1">
        <h3 id="name-example">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-example" class="section-name selfRef">Example</a>
        </h3>
<p id="section-7.1-1">The following example illustrates the new syntax introduced by this
specification. It shows the contents of the <code>claims</code> request parameter.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">Example 1:<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<div class="breakable lang-json sourcecode" id="section-7.1-3">
<pre>{
   "id_token": {
      "verified_claims": {
         "verification": {
            "trust_framework":null,
            "assurance_level": null
         },
         "claims": {
            "family_name": {
               "value":"nonexistent_family_name"
            },
            "given_name":null,
            "birthdate": null,
            "address":null
         }
      }
   },
   "userinfo": {
      "address":null
   },
   "_asc": {
      "sao": {
         "id_token":[
            {
              "loc":"/verified_claims/verification/assurance_level",
              "method": "simple",
              "value": "example_assurance_level",
              "else":"abort"
            },
            {
               "loc":"/verified_claims/claims",
               "method": "schema",
               "schema": {
                  "$schema":"http://json-schema.org/draft-07/schema#",
                  "type":"object",
                  "properties": {
                     "birthdate": {
                        "type":"string",
                        "const":"1900-01-01"
                     }
                  }
               },
               "else":"omit"
            },
            {
               "loc":"/verified_claims/claims/family_name",
               "method": "simple",
               "value": "nonexistent_family_name",
               "else":"omit",
               "what":[
                  "/verified_claims"
               ]
            }
         ],
         "userinfo":[
            {
               "loc":"/address/postal_code",
               "method": "exists",
               "else":"abort"
            }
         ]
      }
   }
}
</pre><a href="#section-7.1-3" class="pilcrow">¶</a>
</div>
<p id="section-7.1-4">Another example for using SAO together with TC is shown below.<a href="#section-7.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="syntax-and-processing">
<section id="section-7.2">
        <h3 id="name-syntax-and-processing">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-syntax-and-processing" class="section-name selfRef">Syntax and Processing</a>
        </h3>
<p id="section-7.2-1">To use Advanced Syntax for Claims, the RP adds a new subelement <code>_asc</code> to the
root level of the <code>claims</code> JSON structure in the authentication request. Within
<code>_asc</code>, the RP adds a new subelement <code>sao</code> that contains the SAO rules. The SAO
rules are grouped by delivery type, i.e., <code>id_token</code> and <code>userinfo</code>.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">Within each delivery type, there is an array of SAO rules, each being an object
with the following fields:<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7.2-3.1">
            <code>loc</code>: REQUIRED. A string containing a JSON Pointer <span>[<a href="#RFC6901" class="cite xref">RFC6901</a>]</span> to the
respective element in the ID Token or Userinfo response structure where the
rule is to be applied.<a href="#section-7.2-3.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-3.2">
            <code>method</code>: OPTIONAL string. If provided, MUST be one of <code>simple</code>, <code>schema</code>, or
<code>exists</code>. If omitted, defaults to <code>exists</code>. Support for <code>schema</code> is OPTIONAL
for OPs and can be discovered using metadata, as described in
<a href="#sao-metadata" class="auto internal xref">Section 7.3</a>.<a href="#section-7.2-3.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-3.3">
            <code>schema</code>: REQUIRED if <code>method</code> is <code>schema</code>, MUST NOT be present otherwise. A
JSON schema object as defined in <span>[<a href="#I-D.bhutton-json-schema" class="cite xref">I-D.bhutton-json-schema</a>]</span> that the respective element
in the ID Token or Userinfo response structure must validate against.<a href="#section-7.2-3.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-3.4">
            <code>value</code> or <code>values</code>: Either <code>value</code> or <code>values</code> is REQUIRED if <code>method</code> is
<code>simple</code>; MUST NOT be present otherwise; <code>value</code> and <code>values</code> MUST NOT be
used together. For <code>value</code>, a valid claim value MUST be provided which is
either a string, a number, or a boolean. For <code>values</code>, an array of such
values MUST be provided.<a href="#section-7.2-3.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-3.5">
            <code>else</code>: REQUIRED. A string, either <code>abort</code> or <code>omit</code>, indicating the action
to take if the rule is not fulfilled. If <code>abort</code> is used, the transaction
MUST be aborted. If <code>omit</code> is used, one or more elements MUST be omitted from
the response, as defined next.<a href="#section-7.2-3.5" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-3.6">
            <code>what</code>: OPTIONAL if the value of <code>else</code> is <code>omit</code>, MUST NOT be used
otherwise. An array of one or more strings, each containing a JSON Pointer
<span>[<a href="#RFC6901" class="cite xref">RFC6901</a>]</span> to the respective element in the ID Token or Userinfo response
structure that are to be omitted if the rule is not fulfilled. If <code>what</code> is
not defined, the element specified in <code>loc</code> is omitted.<a href="#section-7.2-3.6" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-7.2-4">The <code>else</code> action MUST be triggered when<a href="#section-7.2-4" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7.2-5.1">the element indicated by <code>loc</code> does not exist,<a href="#section-7.2-5.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-5.2">the element was removed by a previously executed <code>omit</code> rule, or<a href="#section-7.2-5.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-5.3">the user does not consent to the release of the claim.<a href="#section-7.2-5.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-7.2-6">Additionally, depending on the value of <code>method</code>, the following matches MUST be
performed:<a href="#section-7.2-6" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7.2-7.1">
            <code>simple</code>: The value of the claim indicated by <code>loc</code> is matched against
<code>value</code> or <code>values</code> provided in the SAO rule. If <code>value</code> is provided, the
claim value will be matched to the provided value using exact matching. For
<code>values</code>, the claim value must exactly match at least one of the values in
the array. In the example above, the <code>assurance_level</code> would be matched
against <code>example_assurance_level</code> and <code>family_name</code> would be matched against
<code>nonexistent_family_name</code>. The <code>else</code> action MUST be triggered if the value
of the claim does not match the requested value or values.<a href="#section-7.2-7.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-7.2">
            <code>schema</code>: The JSON Schema <code>schema</code> element MUST apply to the
JSON structure under the element indicated by <code>loc</code>. In the example above,
the schema would be applied to the whole <code>claims</code> object under
<code>verified_claims</code>. The <code>else</code> action MUST be triggered if the schema does not
apply.<a href="#section-7.2-7.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.2-7.3">
            <code>exists</code>: No additional matches are performed.<a href="#section-7.2-7.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-7.2-8">The SAO rules provided MUST be executed first for all <code>id_token</code> rules and then
for all <code>userinfo</code> rules.  Within each delivery type, the SAO rules MUST be
executed in the order they are provided in the request. If an <code>abort</code> action is
triggered, the transaction MUST be aborted and remaining SAO rules MUST NOT be
executed. If an <code>omit</code> action is triggered, the respective elements MUST be
omitted from the response; further SAO rules MUST be executed. Note that <code>omit</code>
is scoped to the respective delivery type, i.e., an element that was omitted
from the <code>id_token</code> response can still be present in the <code>userinfo</code> response if
it was requested for both delivery types.<a href="#section-7.2-8" class="pilcrow">¶</a></p>
<p id="section-7.2-9">In Example 1, data would be processed as follows:<a href="#section-7.2-9" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="section-7.2-10">
<li id="section-7.2-10.1">If the <code>assurance_level</code> is not available as a verified claim or it does not
match the string <code>example_assurance_level</code>, the transaction is aborted.<a href="#section-7.2-10.1" class="pilcrow">¶</a>
</li>
          <li id="section-7.2-10.2">If the <code>birthdate</code> claim is not available or the birthdate is not a string
with the value <code>1900-01-01</code>, the <code>verified_claims/claims</code> object is omitted
from the response. Since the <code>verified_claims</code> element may not be used
without the <code>claims</code> subelement, the whole <code>verified_claims</code> object is
omitted.<a href="#section-7.2-10.2" class="pilcrow">¶</a>
</li>
          <li id="section-7.2-10.3">If the <code>family_name</code> is not available as a verified claim or it does not
match the string <code>nonexistent_family_name</code>, the <code>verified_claims</code> object is
omitted from the response.<a href="#section-7.2-10.3" class="pilcrow">¶</a>
</li>
          <li id="section-7.2-10.4">If the <code>postal_code</code> is not available in the <code>address</code> object, the
transaction is aborted.<a href="#section-7.2-10.4" class="pilcrow">¶</a>
</li>
        </ol>
<div id="interoperability-with-oidc-rules">
<section id="section-7.2.1">
          <h4 id="name-interoperability-with-oidc-">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-interoperability-with-oidc-" class="section-name selfRef">Interoperability with OIDC Rules</a>
          </h4>
<p id="section-7.2.1-1">Any restrictions defined using <code>value</code> or <code>values</code> in the <code>claims</code> parameter
outside of <code>_asc</code>/<code>sao</code> MUST be ignored when <code>_asc</code>/<code>sao</code> is present. This means
that RPs that define <code>_asc</code>/<code>sao</code> MUST define all restrictions explicitly as SAO
rules.<a href="#section-7.2.1-1" class="pilcrow">¶</a></p>
<p id="section-7.2.1-2">Relying parties MAY still use <code>value</code>/<code>values</code> outside of <code>_asc</code>/<code>sao</code> to
provide a fallback in case the OP does not support SAO. In this case, there is
no requirement for the rules outside of <code>_asc</code>/<code>sao</code> to be consistent with the
SAO rules.<a href="#section-7.2.1-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sao-metadata">
<section id="section-7.3">
        <h3 id="name-op-metadata">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-op-metadata" class="section-name selfRef">OP Metadata</a>
        </h3>
<p id="section-7.3-1">The OP advertises its capabilities with respect to Selective Abort/Omit in its openid-configuration (see <span>[<a href="#OpenID-Discovery" class="cite xref">OpenID-Discovery</a>]</span>) using the following new elements:<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7.3-2.1">
            <code>selective_abort_omit_supported</code>: OPTIONAL. Boolean value indicating OP support for "Selective Abort/Omit". Defaults to <code>false</code>.<a href="#section-7.3-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-7.3-2.2">
            <code>selective_abort_omit_schema_supported</code>: OPTIONAL. Boolean value indicating
OP support for the <code>method</code> value <code>schema</code>. Defaults to <code>true</code>. If <code>false</code>,
the OP MUST abort the transaction with an <code>invalid_request</code> error if a JSON
Schema is used in an SAO rule.<a href="#section-7.3-2.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="privacy">
<section id="section-7.4">
        <h3 id="name-privacy-considerations">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-privacy-considerations" class="section-name selfRef">Privacy Considerations</a>
        </h3>
<p id="section-7.4-1">Using Selective Abort/Omit can in general lead to more privacy preserving
systems, as an RP can instruct an OP not to send incomplete datasets that are
not useful to the RP.<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<p id="section-7.4-2">An RP might be able to derive information from a response even if the response
is an error response or claims are omitted. For example, the following request
can be used to derive whether or not the user is named <code>Max</code>:<a href="#section-7.4-2" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-7.4-3">
<pre>{
  "id_token": {
    "given_name": {
      "value": "Max"
    }
  },
  "_asc": {
    "sao": {
      "id_token": [
        {
          "loc": "/given_name",
          "method": "simple",
          "else": "abort"
        }
      ]
    }
  }
}
</pre><a href="#section-7.4-3" class="pilcrow">¶</a>
</div>
<p id="section-7.4-4">When the request is aborted, the user is not called Max. In a naive
implementation, the abort of the request might happen before the user has
consented to the release of the data. In this case, using a series of carefully
crafted requests, an RP might be able to derive substantial information about a
user even if the user's name is never transferred from the OP to the RP
directly. A malicious RP can use this to derive user information without the
user's consent or without paying for the data. Note that <code>omit</code> can leak
information in a similar way.<a href="#section-7.4-4" class="pilcrow">¶</a></p>
<p id="section-7.4-5">To avoid leakage of user information through this mechanism without the user's
consent, implementations SHOULD in general avoid returning a result before a
user has consented to the release of the base data if privacy is a concern in
the respective application. In the example above, the user would be asked to
confirm the release of the given name data field before the OP aborts the
transaction or omits the claim. OPs MAY make exceptions for RPs when a
contractual or trust relationship with this RP was established beforehand or
there are other mechanisms in place to ensure that misuse is prevented.<a href="#section-7.4-5" class="pilcrow">¶</a></p>
<p id="section-7.4-6">To the same end, and to avoid relying parties not paying for data, OPs SHOULD
additionally consider rate-limiting requests and monitoring requests for
anomalies (frequent dynamic changes in request structure, frequent aborts).<a href="#section-7.4-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="compatibility-considerations">
<section id="section-7.5">
        <h3 id="name-compatibility-consideration">
<a href="#section-7.5" class="section-number selfRef">7.5. </a><a href="#name-compatibility-consideration" class="section-name selfRef">Compatibility Considerations</a>
        </h3>
<p id="section-7.5-1">An OP not supporting ASC will ignore the additional <code>_asc</code> key as defined in
Section 5.5.1 of <span>[<a href="#OpenID" class="cite xref">OpenID</a>]</span>. An OP supporting ASC but not SAO MUST ignore the
<code>sao</code> key.<a href="#section-7.5-1" class="pilcrow">¶</a></p>
<p id="section-7.5-2">An RP may receive data from an OP that does not support SAO when aborting the
transaction or not delivering the data was requested instead. RPs can avoid this
by checking for SAO support in the metadata of the OP before sending the
request.<a href="#section-7.5-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="transformed-claims">
<section id="section-8">
      <h2 id="name-transformed-claims">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-transformed-claims" class="section-name selfRef">Transformed Claims</a>
      </h2>
<p id="section-8-1">Using Transformed Claims (TC), a claim value can be transformed using a limited set of functions before any further evaluation on the claim value is performed and before the claim value is returned to the RP.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">Each Transformed Claim is based off exactly one Claim provided by the OP. For example, the Claim <code>birthdate</code> can be used to derive a Transformed Claim for age verification (End-User is above a certain age) by applying a suitable chain of functions.  The number of functions in the chain MAY be limited by use of the OPTIONAL OP Metadata element <code>transformed_claims_max_depth</code>.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">Each function takes one input value (the original Claim's value or the output of the previous function) and produces one output value. Besides the input value, functions can only have static function arguments, typically zero or one.<a href="#section-8-3" class="pilcrow">¶</a></p>
<div id="example-age-verification">
<section id="section-8.1">
        <h3 id="name-example-age-verification">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-example-age-verification" class="section-name selfRef">Example: Age Verification</a>
        </h3>
<p id="section-8.1-1">The Claim <code>birthdate</code>, a date, can be transformed into an integer using the function <code>years_ago</code>. This function outputs the number of years between the current date and the input date, rounded down. The resulting integer can be transformed using the function <code>gte</code> with the argument <code>18</code>. This function evaluates whether the input value is greater than or equal to the given argument. Its output is either <code>true</code> or <code>false</code>. The resulting Transformed Claim, representing whether the End-User is above 18 or not, can be aliased, for example <code>age_18_or_over</code>. This Claim can be used within the OpenID Connect <code>claims</code> parameter instead of or together with the original Claim, <code>birthdate</code>.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">If data for the original Claim <code>birthdate</code> is unavailable, the new Claim <code>age_18_or_over</code> shall be treated like an unavailable Claim as well.<a href="#section-8.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="defining-transformed-claims">
<section id="section-8.2">
        <h3 id="name-defining-transformed-claims">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-defining-transformed-claims" class="section-name selfRef">Defining Transformed Claims</a>
        </h3>
<p id="section-8.2-1">Transformed Claims are defined by the RP in the <code>claims</code> parameter of the Authentication Request. The RP adds a new subelement <code>transformed_claims</code> within the <code>_asc</code> element in the root of the <code>claims</code> JSON structure.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2"><code>transformed_claims</code> is a JSON object in which each key represents a definition for a new Transformed Claim. Each definition consists of an object with the following keys:<a href="#section-8.2-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.2-3.1">
            <code>claim</code> defines the Claim on which the Transformed Claim is based<a href="#section-8.2-3.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-8.2-3.2">
            <code>fn</code> is the array of functions to apply to the base Claim, in order of application. Each function is either a string, like <code>year_ago</code> to apply the function without further arguments, or an array, like <code>["gte", 18]</code>, to apply the function with arguments.<a href="#section-8.2-3.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-8.2-4">For example, the Transformed Claim for age verification from above could be defined as follows:<a href="#section-8.2-4" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.2-5">
<pre>{
  "_asc": {
    "transformed_claims": {
      "age_18_or_over": {
        "claim": "birthdate",
        "fn": [
          "years_ago",
          [
            "gte",
            18
          ]
        ]
      }
    }
  },
  "id_token": {
    ...
  }
}

</pre><a href="#section-8.2-5" class="pilcrow">¶</a>
</div>
<p id="section-8.2-6">Note: There can be multiple Transformed Claims defined on the same base Claim.<a href="#section-8.2-6" class="pilcrow">¶</a></p>
<p id="section-8.2-7">TODO: Define charset for transformed claim names, shall not start with ':'.<a href="#section-8.2-7" class="pilcrow">¶</a></p>
<div id="requesting-transformed-claims">
<section id="section-8.2.1">
          <h4 id="name-requesting-transformed-clai">
<a href="#section-8.2.1" class="section-number selfRef">8.2.1. </a><a href="#name-requesting-transformed-clai" class="section-name selfRef">Requesting Transformed Claims</a>
          </h4>
<p id="section-8.2.1-1">To request a Transformed Claim, the RP uses the name of the Transformed Claim where it would normally use the base Claim. A colon (<code>:</code>) is prepended to avoid confusion with potentially existing normal Claims.<a href="#section-8.2.1-1" class="pilcrow">¶</a></p>
<p id="section-8.2.1-2">Example:<a href="#section-8.2.1-2" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.2.1-3">
<pre>{
  "_asc": {
    "transformed_claims": {
      "age_18_or_over": {
        "claim": "birthdate",
        "fn": [
          "years_ago",
          [
            "gte",
            18
          ]
        ]
      }
    }
  },
  "id_token": {
    "given_name": null,
    "family_name": null,
    ":age_18_or_over": null
  }
}

</pre><a href="#section-8.2.1-3" class="pilcrow">¶</a>
</div>
<p id="section-8.2.1-4">In some circumstances, the same Claim name can appear in different locations within the <code>claims</code> parameter with different meanings. For example, in <span>[<a href="#IDA" class="cite xref">IDA</a>]</span>, <code>birthdate</code> can also be used within <code>verified_claims/claims</code>. Therefore, the reference to the base Claim shall be evaluated relative to the location where the Transformed Claim is used.<a href="#section-8.2.1-4" class="pilcrow">¶</a></p>
<p id="section-8.2.1-5">Example: In <span>[<a href="#IDA" class="cite xref">IDA</a>]</span>, the same <code>age_18_or_over</code> Claim defined above can be evaluated based on the 'Verified Claim' <code>birthdate</code> when used like this:<a href="#section-8.2.1-5" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.2.1-6">
<pre>{
  ...
  "id_token": {
    "verified_claims": {
      "claims": {
        "given_name": null,
        "family_name": null,
        ":age_18_or_over": null
      },
      ...
    }
  }
}

</pre><a href="#section-8.2.1-6" class="pilcrow">¶</a>
</div>
<p id="section-8.2.1-7">It is therefore theoretically possible to use the same Transformed Claim in two
different locations in the request, yielding potentially different values.<a href="#section-8.2.1-7" class="pilcrow">¶</a></p>
<p id="section-8.2.1-8">Any option available for normal Claims can also be used with Transformed Claims. The evaluation of these options (e.g., a constraint defined using <code>value</code>) is always performed based on the transformed value.<a href="#section-8.2.1-8" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.2.1-9">
<pre>{
  ...
  "id_token": {
    "given_name": null,
    "family_name": null,
    ":age_18_or_over": {
      "value": true,
      "essential": true
    }
  }
}
</pre><a href="#section-8.2.1-9" class="pilcrow">¶</a>
</div>
<p id="section-8.2.1-10">There is no requirement to use all defined Transformed Claims within a request.<a href="#section-8.2.1-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="combination-with-selective-abort-omit">
<section id="section-8.2.2">
          <h4 id="name-combination-with-selective-">
<a href="#section-8.2.2" class="section-number selfRef">8.2.2. </a><a href="#name-combination-with-selective-" class="section-name selfRef">Combination with Selective Abort/Omit</a>
          </h4>
<p id="section-8.2.2-1">Transformed Claims can be used together with Selective Abort/Omit. In this case,
transformed claims are evaluated before the SAO rules are applied. The SAO rules
are applied to the transformed value.<a href="#section-8.2.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2.2-2">Example:<a href="#section-8.2.2-2" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.2.2-3">
<pre>{
  "id_token": {
    "given_name": null,
    "family_name": null,
    ":age_18_or_over": {
      "value": true
    }
  },
  "_asc": {
    "transformed_claims": {
      "age_18_or_over": {
        "claim": "birthdate",
        "fn": [
          "years_ago",
          [
            "gte",
            18
          ]
        ]
      }
    },
    "sao": {
      "id_token": [
        {
          "loc": "/:age_18_or_over",
          "method": "simple",
          "value": true,
          "else": "abort"
        }
      ]
    }
  }
}
</pre><a href="#section-8.2.2-3" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="data-types">
<section id="section-8.3">
        <h3 id="name-data-types">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-data-types" class="section-name selfRef">Data Types</a>
        </h3>
<p id="section-8.3-1">Claims defined in <span>[<a href="#OpenID" class="cite xref">OpenID</a>]</span> and <span>[<a href="#IDA" class="cite xref">IDA</a>]</span> have one of the data types 'string', 'boolean', 'number', 'JSON object' or 'array'. For the purpose of this specification, these data types are used as well as the new data type 'date', which applies to Claims representing dates, and 'datetime', which applies to Claims representing date and time. Therefore, <code>birthdate</code> is both of type <code>string</code> and <code>date</code>, and <code>updated_at</code> is both of type <code>number</code> and <code>datetime</code>.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3-2">Todo: Define input formats for date and datetime.<a href="#section-8.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="transformation-functions">
<section id="section-8.4">
        <h3 id="name-transformation-functions">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-transformation-functions" class="section-name selfRef">Transformation Functions</a>
        </h3>
<p id="section-8.4-1">In the following, a base set of transformation functions is defined. OPs supporting Transformed Claims shall support at least one transformation function.<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<p id="section-8.4-2">In the following, the first function argument <code>Input</code> refers to the value of the
base Claim, or, if multiple functions are to be applied, the output of the
previous function. For other arguments, the RP defines a constant value in each
request. Optional arguments may be omitted.<a href="#section-8.4-2" class="pilcrow">¶</a></p>
<p id="section-8.4-3">This specification defines the following functions:<a href="#section-8.4-3" class="pilcrow">¶</a></p>
<div id="counting-years">
<section id="section-8.4.1">
          <h4 id="name-counting-years">
<a href="#section-8.4.1" class="section-number selfRef">8.4.1. </a><a href="#name-counting-years" class="section-name selfRef">Counting Years</a>
          </h4>
<p id="section-8.4.1-1">Function signature: <code>years_ago(date|datetime Input, optional date ReferenceDate) -&gt; number</code><a href="#section-8.4.1-1" class="pilcrow">¶</a></p>
<p id="section-8.4.1-2">If only an input date or datetime is provided, returns the number of years elapsed since the given <code>Input</code> day, rounded down. With a <code>ReferenceDate</code>, returns the number of years elapsed between the <code>Input</code> date and the <code>ReferenceDate</code>.<a href="#section-8.4.1-2" class="pilcrow">¶</a></p>
<p id="section-8.4.1-3">Note: If the year of the <code>Input</code> date is <code>0000</code>, the resulting Claim shall be unavailable.<a href="#section-8.4.1-3" class="pilcrow">¶</a></p>
<p id="section-8.4.1-4">Note: When applied to an array of valid input values, returns an array with the function applied to each input value in order.<a href="#section-8.4.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="equality">
<section id="section-8.4.2">
          <h4 id="name-equality">
<a href="#section-8.4.2" class="section-number selfRef">8.4.2. </a><a href="#name-equality" class="section-name selfRef">Equality</a>
          </h4>
<p id="section-8.4.2-1">Function signatures:<a href="#section-8.4.2-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.4.2-2.1">
              <code>eq(string Input, string Compare) -&gt; boolean</code><a href="#section-8.4.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.2-2.2">
              <code>eq(number Input, number Compare) -&gt; boolean</code><a href="#section-8.4.2-2.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.2-2.3">
              <code>eq(boolean Input, boolean Compare) -&gt; boolean</code><a href="#section-8.4.2-2.3" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.2-2.4">
              <code>eq(date|datetime Input, date|datetime Compare) -&gt; boolean</code><a href="#section-8.4.2-2.4" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-8.4.2-3">Return <code>true</code> if and only if <code>Input</code> equals <code>Output</code>. Return <code>false</code> otherwise. For comparisons between <code>date</code> and <code>datetime</code> values, the time of day is ignored unless <code>Input</code> and <code>Compare</code> are both of type <code>datetime</code>.<a href="#section-8.4.2-3" class="pilcrow">¶</a></p>
<p id="section-8.4.2-4">Additionally, the following functions for partial string matching are defined:<a href="#section-8.4.2-4" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.4.2-5.1">
              <code>contains(string Input, string Compare) -&gt; boolean</code><a href="#section-8.4.2-5.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.2-5.2">
              <code>starts_with(string Input, string Compare) -&gt; boolean</code><a href="#section-8.4.2-5.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.2-5.3">
              <code>ends_with(string Input, string Compare) -&gt; boolean</code><a href="#section-8.4.2-5.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-8.4.2-6">Return <code>true</code> if and only if <code>Input</code> contains, starts with, or ends with <code>Compare</code>. Return <code>false</code> otherwise.<a href="#section-8.4.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="number-date-datetime-comparison">
<section id="section-8.4.3">
          <h4 id="name-number-date-datetime-compar">
<a href="#section-8.4.3" class="section-number selfRef">8.4.3. </a><a href="#name-number-date-datetime-compar" class="section-name selfRef">Number/Date/Datetime Comparison</a>
          </h4>
<p id="section-8.4.3-1">Function signatures:<a href="#section-8.4.3-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.4.3-2.1">
              <code>gt(number Input, number Compare): -&gt; boolean</code><a href="#section-8.4.3-2.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.3-2.2">
              <code>gt(date|datetime Input, date|datetime Compare): -&gt; boolean</code><a href="#section-8.4.3-2.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.3-2.3">
              <code>lt(number Input, number Compare): -&gt; boolean</code><a href="#section-8.4.3-2.3" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.3-2.4">
              <code>lt(date|datetime Input, date|datetime Compare): -&gt; boolean</code><a href="#section-8.4.3-2.4" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.3-2.5">
              <code>gte(number Input, number Compare): -&gt; boolean</code><a href="#section-8.4.3-2.5" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.3-2.6">
              <code>gte(date|datetime Input, date|datetime Compare): -&gt; boolean</code><a href="#section-8.4.3-2.6" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.3-2.7">
              <code>lte(number Input, number Compare): -&gt; boolean</code><a href="#section-8.4.3-2.7" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.3-2.8">
              <code>lte(date|datetime Input, date|datetime Compare): -&gt; boolean</code><a href="#section-8.4.3-2.8" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-8.4.3-3">Evaluate whether <code>Input</code> is greather/less than (or equal to) the given
<code>Compare</code>. For comparisons between <code>date</code> and <code>datetime</code> values, the time of day
is ignored unless <code>Input</code> and <code>Compare</code> are both of type <code>datetime</code>.<a href="#section-8.4.3-3" class="pilcrow">¶</a></p>
<p id="section-8.4.3-4">Note: When applied to an array of valid input values, returns an array with the function applied to each input value in order.<a href="#section-8.4.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="hashing">
<section id="section-8.4.4">
          <h4 id="name-hashing">
<a href="#section-8.4.4" class="section-number selfRef">8.4.4. </a><a href="#name-hashing" class="section-name selfRef">Hashing</a>
          </h4>
<p id="section-8.4.4-1">Function signature: <code>hash(string Input, string HashAlgorithm) -&gt; string</code><a href="#section-8.4.4-1" class="pilcrow">¶</a></p>
<p id="section-8.4.4-2">Returns the hash of the UTF-8 representation of the input string, encoded as a
lowercase hex string. <code>HashAlgorithm</code> refers to the hash algorithm to be used,
with valid values being <code>sha-256</code> and <code>sha-512</code>.<a href="#section-8.4.4-2" class="pilcrow">¶</a></p>
<p id="section-8.4.4-3">Example: <code>hash('Jörg', 'sha-256')</code> produces the string
<code>8e63741c42f7c08025339f1a380d98030a698aa04f1fa3c595dcb581632af452</code>.<a href="#section-8.4.4-3" class="pilcrow">¶</a></p>
<p id="section-8.4.4-4">This function can be used together with the <code>eq</code> operator or a restriction
expressed using <code>value</code> or <code>values</code> to have the OP match a string against a
value without revealing the clear-text value to the OP.<a href="#section-8.4.4-4" class="pilcrow">¶</a></p>
<p id="section-8.4.4-5">It is important to note that the privacy advantage is generally limited,
especially when the input strings can be enumerated easily, as is common for
names, numbers and date/datetime values. A malicious OP could try to calculate
the hashes of all possible clear-text values and match the hashes against the
hash provided by the RP in order to reveal the original clear-text value.<a href="#section-8.4.4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="array-evaluation">
<section id="section-8.4.5">
          <h4 id="name-array-evaluation">
<a href="#section-8.4.5" class="section-number selfRef">8.4.5. </a><a href="#name-array-evaluation" class="section-name selfRef">Array Evaluation</a>
          </h4>
<p id="section-8.4.5-1">Function signatures:<a href="#section-8.4.5-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.4.5-2.1">
              <code>any(array of booleans Input) -&gt; boolean</code><a href="#section-8.4.5-2.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.5-2.2">
              <code>all(array of booleans Input) -&gt; boolean</code><a href="#section-8.4.5-2.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.5-2.3">
              <code>none(array of booleans Input) -&gt; boolean</code><a href="#section-8.4.5-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-8.4.5-3">Return <code>true</code> if and only if any, all, or none of the boolean values in the <code>Input</code> array are <code>true</code>. Return <code>false</code> otherwise.<a href="#section-8.4.5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="json-object-access">
<section id="section-8.4.6">
          <h4 id="name-json-object-access">
<a href="#section-8.4.6" class="section-number selfRef">8.4.6. </a><a href="#name-json-object-access" class="section-name selfRef">JSON Object Access</a>
          </h4>
<p id="section-8.4.6-1">Function signature: <code>get(JSON object Input, string Key) -&gt; *</code><a href="#section-8.4.6-1" class="pilcrow">¶</a></p>
<p id="section-8.4.6-2">From the JSON object <code>Input</code>, return the member with key <code>Key</code>. If the respective key is not available in the JSON object, the resulting Claim shall be unavailable.<a href="#section-8.4.6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="matching">
<section id="section-8.4.7">
          <h4 id="name-matching">
<a href="#section-8.4.7" class="section-number selfRef">8.4.7. </a><a href="#name-matching" class="section-name selfRef">Matching</a>
          </h4>
<p id="section-8.4.7-1">Function signature: <code>match(string Input, string RegEx) -&gt; boolean</code><a href="#section-8.4.7-1" class="pilcrow">¶</a></p>
<p id="section-8.4.7-2">Return <code>true</code> if and only if the <code>RegEx</code> matches the <code>Input</code> string. The match
can be at any location within <code>Input</code> unless further constrained by <code>RegEx</code>. Return <code>false</code> otherwise.<a href="#section-8.4.7-2" class="pilcrow">¶</a></p>
<p id="section-8.4.7-3">Important: OPs implementing this function shall take precautions against 'catastrophic backtracking', i.e., regular expressions that are designed to exhaust the computing power of the OP. To this end, a reasonably brief time limit on the execution time for the regular expression matching operation shall be imposed, e.g., a few milliseconds. If the execution takes longer, the resulting Claim shall be unavailable.<a href="#section-8.4.7-3" class="pilcrow">¶</a></p>
<p id="section-8.4.7-4">TODO: Define Regex dialect to use. PCRE, PCRE2?<a href="#section-8.4.7-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="extending-the-transformation-functions">
<section id="section-8.4.8">
          <h4 id="name-extending-the-transformatio">
<a href="#section-8.4.8" class="section-number selfRef">8.4.8. </a><a href="#name-extending-the-transformatio" class="section-name selfRef">Extending the Transformation Functions</a>
          </h4>
<p id="section-8.4.8-1">Extensions of this specification may define further Transformation Functions.
New Transformation Functions defined outside official standards shall use the
prefix <code>x-</code> to avoid naming collisions with standardized Transformation
Functions.<a href="#section-8.4.8-1" class="pilcrow">¶</a></p>
<p id="section-8.4.8-2">TODO: Registry? Prefixing considered harmful?<a href="#section-8.4.8-2" class="pilcrow">¶</a></p>
<p id="section-8.4.8-3">All Transformation Functions shall follow the following conventions:<a href="#section-8.4.8-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.4.8-4.1">
              <p id="section-8.4.8-4.1.1">To avoid information leakage to the RP, a Transformation Function shall be designed such that it does not open a side-channel to other information stored at the OP. To this end, a Transformation Function shall only make use of information that is either<a href="#section-8.4.8-4.1.1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.4.8-4.1.2.1">directly provided via the static function arguments,<a href="#section-8.4.8-4.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="compact" id="section-8.4.8-4.1.2.2">can be derived from the <code>Input</code>, or<a href="#section-8.4.8-4.1.2.2" class="pilcrow">¶</a>
</li>
                <li class="compact" id="section-8.4.8-4.1.2.3">is available to the RP from other sources, e.g., public information like time and date.<a href="#section-8.4.8-4.1.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="compact" id="section-8.4.8-4.2">The application of Transformation Functions shall have no side effects on other Claim values.<a href="#section-8.4.8-4.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.4.8-4.3">Transformation Functions shall be safe to execute for the OP for all combinations of inputs and arguments, as the requests generally come from an untrusted source. This includes security against Denial-of-Service attacks.<a href="#section-8.4.8-4.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="predefined-transformed-claims-ptc">
<section id="section-8.5">
        <h3 id="name-predefined-transformed-clai">
<a href="#section-8.5" class="section-number selfRef">8.5. </a><a href="#name-predefined-transformed-clai" class="section-name selfRef">Predefined Transformed Claims (PTC)</a>
        </h3>
<p id="section-8.5-1">An OP supporting Transformed Claims shall publish the key <code>transformed_claims_functions_supported</code> containing an array of supported functions (only the function names) in its OP Metadata.<a href="#section-8.5-1" class="pilcrow">¶</a></p>
<p id="section-8.5-2">Example:<a href="#section-8.5-2" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.5-3">
<pre>...
  "transformed_claims_functions_supported": ["eq", "match", "years_ago"],
...
</pre><a href="#section-8.5-3" class="pilcrow">¶</a>
</div>
<p id="section-8.5-4">An RP can use the presence of this key to determine general support for Transformed Claims at the OP.<a href="#section-8.5-4" class="pilcrow">¶</a></p>
<p id="section-8.5-5">An OP may predefine Transformed Claims. This avoids repetitions in requests and enables RPs to use Transformed Claims without requiring specific software support.<a href="#section-8.5-5" class="pilcrow">¶</a></p>
<p id="section-8.5-6">To predefine a Transformed Claim, the OP publishes the key <code>transformed_claims_predefined</code> in its OP metadata. Its contents follow the same syntax as <code>transformed_claims</code> in the <code>claims</code> object:<a href="#section-8.5-6" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.5-7">
<pre>...
  "transformed_claims_predefined": {
    "age_18_or_over": {
      "claim": "birthdate",
      "fn": [
        "years_ago",
        [
          "gte",
          18
        ]
      ]
    },
    "age_21_or_over": {
      "claim": "birthdate",
      "fn": [
        "years_ago",
        [
          "gte",
          21
        ]
      ]
    }
  }
...
</pre><a href="#section-8.5-7" class="pilcrow">¶</a>
</div>
<p id="section-8.5-8">RPs may use PTCs in a request to the OP as if the respective Transformed Claims
were defined in <code>transformed_claims</code> in the request. However, two colons (<code>::</code>) are prepended to distinguish predefined from custom Transformed Claims:<a href="#section-8.5-8" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.5-9">
<pre>{
  "id_token": {
    "given_name": null,
    "family_name": null,
    "::age_18_or_over": {
      "value": true,
      "essential": true
    }
  }
}
</pre><a href="#section-8.5-9" class="pilcrow">¶</a>
</div>
<p id="section-8.5-10">An OP may further set the key <code>transformed_claims_max_count</code> to <code>0</code> to
denote that only PTCs can be used and custom Transformed Claims are not
supported.<a href="#section-8.5-10" class="pilcrow">¶</a></p>
<p id="section-8.5-11">Example:<a href="#section-8.5-11" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.5-12">
<pre>...
  "transformed_claims_functions_supported": ["years_ago", "gte"],
  "transformed_claims_max_count": 0,
  "transformed_claims_predefined": {
    "age_18_or_over": {
      "claim": "birthdate",
      "fn": [
        "years_ago",
        [
          "gte",
          18
        ]
      ]
    }
  },
...
</pre><a href="#section-8.5-12" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="op-metadata">
<section id="section-8.6">
        <h3 id="name-op-metadata-2">
<a href="#section-8.6" class="section-number selfRef">8.6. </a><a href="#name-op-metadata-2" class="section-name selfRef">OP Metadata</a>
        </h3>
<p id="section-8.6-1">The OP advertises its capabilities with respect to Transformed Claims in its openid-configuration (see <span>[<a href="#OpenID-Discovery" class="cite xref">OpenID-Discovery</a>]</span>) using the following new elements:<a href="#section-8.6-1" class="pilcrow">¶</a></p>
<p id="section-8.6-2"><code>transformed_claims_functions_supported</code>: OPTIONAL. JSON array indicating support for Transformed Claims, and containing an array of the supported function names. When present this array must have at least one member.<a href="#section-8.6-2" class="pilcrow">¶</a></p>
<p id="section-8.6-3"><code>transformed_claims_predefined</code>: OPTIONAL. JSON object containing the definitions of all supported Predefined Transformed Claims following the same syntax as <code>transformed_claims</code> in the <code>claims</code> object. When present this object must contain at least one definition of a Predefined Transformed Claim. If this metadata value is omitted, the OP does not support Predefined Transformed Claims.<a href="#section-8.6-3" class="pilcrow">¶</a></p>
<p id="section-8.6-4"><code>transformed_claims_max_depth</code>: OPTIONAL. Integer value indicating the maximum number of functions in a chain of functions used to define a transformed claim. If this metadata value is omitted, the OP MUST support chains of functions of any length.<a href="#section-8.6-4" class="pilcrow">¶</a></p>
<p id="section-8.6-5"><code>transformed_claims_max_count</code>: OPTIONAL. Integer value indicating the maximum number of transformed claims an RP can define, excluding any Predefined Transformed Claims. If this is set to <code>0</code>, the RP may only use Predefined Transformed Claims.  If this metadata value is omitted, the OP MUST support any number of transformed claims.<a href="#section-8.6-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="error-conditions">
<section id="section-8.7">
        <h3 id="name-error-conditions">
<a href="#section-8.7" class="section-number selfRef">8.7. </a><a href="#name-error-conditions" class="section-name selfRef">Error Conditions</a>
        </h3>
<p id="section-8.7-1">The following error conditions MUST be checked by an OP, in this order:<a href="#section-8.7-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="section-8.7-2">
<li id="section-8.7-2.1">If the definition of a transformed claim provided by an RP uses more than <code>transformed_claims_max_depth</code> function applications or the number of custom transformed claims exceeds <code>transformed_claims_max_count</code>, the OP MUST abort the transaction with an <code>invalid_request</code> error. The <code>error_description</code> provided by the OP SHOULD indicate the location and nature of the error.<a href="#section-8.7-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-8.7-2.2">If an RP uses, in a definition for a transformed claim, a function not supported by the OP and therefore not listed in <code>transformed_claims_functions_supported</code>, or the wrong number of arguments, or a wrong type of argument, the OP MUST abort the transaction with an <code>invalid_request</code> error. The <code>error_description</code> provided by the OP SHOULD indicate the location and nature of the error.<a href="#section-8.7-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-8.7-2.3">Each transformed claim is based on a single base claim, as expressed by the <code>claim</code> key in the definition of the transformed claim. In case this base claim is not known to the OP, or data is not available for this claim, or similar conditions, the transformed claim MUST be treated the same as the base claim. For example, if the base claim is unknown to the OP, the transformed claim is handled as if it were an unknown claim as well. If an End-User choses not to release the base claim, or the base claim is not released to the RP for some other reason, the transformed claim MUST NOT be released as well.<a href="#section-8.7-2.3" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-8.7-3">In general, if an RP references an undefined transformed claim in the <code>claims</code> parameter, the claim MUST be treated like a claim unknown to the OP.<a href="#section-8.7-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ux-and-privacy-considerations">
<section id="section-8.8">
        <h3 id="name-ux-and-privacy-consideratio">
<a href="#section-8.8" class="section-number selfRef">8.8. </a><a href="#name-ux-and-privacy-consideratio" class="section-name selfRef">UX and Privacy Considerations</a>
        </h3>
<p id="section-8.8-1">The consent of the End-User is typically required before data can be released by the OP to the RP. An OP cannot be expected to automatically parse and understand all potential combinations of transformation functions and their arguments in order to create a detailed consent prompt for the End-User.<a href="#section-8.8-1" class="pilcrow">¶</a></p>
<p id="section-8.8-2">OPs can use a number of strategies to ensure that End-User consent is always given in a meaningful way and to provide a good user experience (UX):<a href="#section-8.8-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.8-3.1">Simple cases, for example the combination of <code>years_ago</code> and <code>gte(x)</code> applied
to <code>birthdate</code> shown above, can be translated into a statement like "The RP
wants to know that you are above age <code>x</code>". OPs can prepare a number of
patterns to match against the RP's request for common use cases in their
ecosystem.<a href="#section-8.8-3.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-8.8-3.2">Since PTCs are predefined by the OP, the OP shall be able to provide a
meaningful consent text for all its PTCs.<a href="#section-8.8-3.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-8.8-3.3">In all other cases, the OP can ask the End-User for
their consent to release the full information of the base Claim, e.g., to ask
for the consent to release the birthdate instead of verification of age. This is a safe overapproximation due to the guidelines for transformation functions described above.<a href="#section-8.8-3.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="compatibility-considerations-1">
<section id="section-8.9">
        <h3 id="name-compatibility-considerations">
<a href="#section-8.9" class="section-number selfRef">8.9. </a><a href="#name-compatibility-considerations" class="section-name selfRef">Compatibility Considerations</a>
        </h3>
<p id="section-8.9-1">An OP not supporting Transformed Claims will ignore the additional element in the <code>claims</code> parameter as defined in Section 5.5 of <span>[<a href="#OpenID" class="cite xref">OpenID</a>]</span>. All Transformed Claims requested by RPs are therefore unknown to the OP and treated like other unknown claims, i.e., they will typically be ignored.<a href="#section-8.9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="examples">
<section id="section-8.10">
        <h3 id="name-examples">
<a href="#section-8.10" class="section-number selfRef">8.10. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
        </h3>
<p id="section-8.10-1">The following example shows two custom Transformed Claims being defined and used. Note: Features from Selective Abort/Omit defined above are used as well.<a href="#section-8.10-1" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.10-2">
<pre>{
    "transformed_claims": {
        "company_email": {
            "claim": "email",
            "fn": [
                [
                    "match",
                    "@company\\.com$"
                ]
            ]
        },
        "nationality_usa": {
            "claim": "nationalities",
            "fn": [
                [
                    "eq",
                    "USA"
                ],
                "any"
            ]
        }
    },
    "id_token": {
        "given_name": null,
        "family_name": null,
        ":company_email": {
            "value": true,
            "if_different": "abort"
        },
        "email_verified": {
            "value": true,
            "if_different": "abort"
        },
        "verified_claims": {
            "claims": {
                ":nationality_usa": {
                    "value": true,
                    "if_different": "abort"
                }
            },
            "verification": {
                "trust_framework": null
            }
        }
    }
}
</pre><a href="#section-8.10-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="Security">
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<div id="integrity-protection-of-the-authentication-request">
<section id="section-9.1">
        <h3 id="name-integrity-protection-of-the">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-integrity-protection-of-the" class="section-name selfRef">Integrity Protection of the Authentication Request</a>
        </h3>
<p id="section-9.1-1">For a secure operation of the mechanisms defined in this specification, it is important to protect the <code>claims</code> parameter against modifications. Otherwise, a malicious End-User or attacker could create situations where the RP receives misleading data.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2">Moreover, some features in this specification are particularly suited for use cases of OpenID Connect where the RP pays for data received. In such use cases, integrity protection of the <code>claims</code> parameter can be advised to avoid having the RP pay for data not requested.<a href="#section-9.1-2" class="pilcrow">¶</a></p>
<p id="section-9.1-3">As an example for a malicious modification, when an RP defines a transformed claim <code>:age_18_or_over</code> as shown above, an End-User that is only 12 years old could modify the definition of the Claim from<a href="#section-9.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1-4">
<pre>    "age_18_or_over": {
      "claim": "birthdate",
      "fn": [
        "years_ago",
        [
          "gte",
          18
        ]
      ]
    }
</pre><a href="#section-9.1-4" class="pilcrow">¶</a>
</div>
<p id="section-9.1-5">to<a href="#section-9.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1-6">
<pre>    "age_18_or_over": {
      "claim": "birthdate",
      "fn": [
        "years_ago",
        [
          "gte",
          12
        ]
      ]
    }
</pre><a href="#section-9.1-6" class="pilcrow">¶</a>
</div>
<p id="section-9.1-7">and pass the age verification check. When using Selective Abort/Omit, a user could create situations where a flow continues instead of being aborted due to a mismatch in the End-User's data.<a href="#section-9.1-7" class="pilcrow">¶</a></p>
<p id="section-9.1-8">Therefore, the following rules apply:<a href="#section-9.1-8" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-9.1-9.1">Authentication requests using features from Selective Abort/Omit SHOULD only be accepted by an OP if they are integrity-protected and authenticated.<a href="#section-9.1-9.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-9.1-9.2">Authentication requests using Transformed Claims MUST only be accepted by an OP if they are integrity-protected, unless <code>transformed_claims_max_count</code> is set to <code>0</code> in which case the OP MAY accept authentication requests without integrity protection and authentication. Since Predefined Transformed Claims are defined by the OP, integrity protection and authentication is not required for their use.<a href="#section-9.1-9.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-9.1-10">Integrity protection and authentication of authentication requests can be achieved in particular by<a href="#section-9.1-10" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-9.1-11.1">using Pushed Authorization Requests <span>[<a href="#RFC9126" class="cite xref">RFC9126</a>]</span> to send requests server-to-server with authentication of the RP, or<a href="#section-9.1-11.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-9.1-11.2">using JWT-Secured Authorization Requests <span>[<a href="#RFC9101" class="cite xref">RFC9101</a>]</span> to sign the authentication request parameters.<a href="#section-9.1-11.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-9.1-12">Using a suitable security profile for OpenID Connect that includes authentication and integrity protection for the authentication request is RECOMMENDED, as this helps to ensure that the protection cannot be circumvented.<a href="#section-9.1-12" class="pilcrow">¶</a></p>
</section>
</div>
<div id="safe-execution-of-transformation-functions">
<section id="section-9.2">
        <h3 id="name-safe-execution-of-transform">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-safe-execution-of-transform" class="section-name selfRef">Safe Execution of Transformation Functions</a>
        </h3>
<p id="section-9.2-1">OPs MUST ensure that all possible combinations of transformation functions and their respective arguments can be executed securely and without undesired side effects. In particular, for any function supported by the OP, the OP MUST ensure that time and memory limits apply to avoid Denial-of-Service Attacks. For many functions, for example, comparison functions, this is usually inherent to the function itself. For other functions, execution time and complexity limits SHOULD be considered. For example, when applying regular expressions, Regular Expression DoS attacks (ReDoS) are a concern.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2-2">OPs therefore MAY limit the range of valid input arguments and valid combinations of functions to ensure a secure operation.<a href="#section-9.2-2" class="pilcrow">¶</a></p>
<p id="section-9.2-3">OPs SHOULD consider setting <code>transformed_claims_max_depth</code> and <code>transformed_claims_max_count</code> to reasonable values to avoid Denial-of-Service attacks.<a href="#section-9.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-10">
      <h2 id="name-normative-references-2">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-normative-references-2" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="I-D.bhutton-json-schema">[I-D.bhutton-json-schema]</dt>
      <dd>
<span class="refAuthor">Wright, A.</span>, <span class="refAuthor">Andrews, H.</span>, <span class="refAuthor">Hutton, B.</span>, and <span class="refAuthor">G. Dennis</span>, <span class="refTitle">"JSON Schema: A Media Type for Describing JSON Documents"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-bhutton-json-schema-01</span>, <time datetime="2022-06-10" class="refDate">10 June 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-01">https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IDA">[IDA]</dt>
      <dd>
<span class="refAuthor">Lodderstedt, T.</span>, <span class="refAuthor">Fett, D.</span>, <span class="refAuthor">Haine, M.</span>, <span class="refAuthor">Pulido, A.</span>, <span class="refAuthor">Lehmann, K.</span>, and <span class="refAuthor">K. Koiwai</span>, <span class="refTitle">"OpenID Connect for Identity Assurance 1.0"</span>, <span>&lt;<a href="https://openid.net/specs/openid-connect-4-identity-assurance-1_0.html">https://openid.net/specs/openid-connect-4-identity-assurance-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="ISODIR2">[ISODIR2]</dt>
      <dd>
<span class="refAuthor">Standardization, I. O. F.</span>, <span class="refTitle">"ISO/IEC Directives Part 2 -"</span>, <span>&lt;<a href="https://www.iso.org/sites/directives/current/part2/index.xhtml">https://www.iso.org/sites/directives/current/part2/index.xhtml</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenID">[OpenID]</dt>
      <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Jones, M.</span>, <span class="refAuthor">de Medeiros, B.</span>, and <span class="refAuthor">C. Mortimore</span>, <span class="refTitle">"OpenID Connect Core 1.0 incorporating errata set 1"</span>, <time datetime="2014-11-08" class="refDate">8 November 2014</time>, <span>&lt;<a href="https://openid.net/specs/openid-connect-core-1_0.html">https://openid.net/specs/openid-connect-core-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenID-Discovery">[OpenID-Discovery]</dt>
      <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Jones, M.</span>, and <span class="refAuthor">E. Jay</span>, <span class="refTitle">"OpenID Connect Discovery 1.0 incorporating errata set 1"</span>, <time datetime="2014-11-08" class="refDate">8 November 2014</time>, <span>&lt;<a href="https://openid.net/specs/openid-connect-discovery-1_0.html">https://openid.net/specs/openid-connect-discovery-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6901">[RFC6901]</dt>
    <dd>
<span class="refAuthor">Bryan, P., Ed.</span>, <span class="refAuthor">Zyp, K.</span>, and <span class="refAuthor">M. Nottingham, Ed.</span>, <span class="refTitle">"JavaScript Object Notation (JSON) Pointer"</span>, <span class="seriesInfo">RFC 6901</span>, <span class="seriesInfo">DOI 10.17487/RFC6901</span>, <time datetime="2013-04" class="refDate">April 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6901">https://www.rfc-editor.org/info/rfc6901</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-11">
      <h2 id="name-informative-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="RFC9101">[RFC9101]</dt>
      <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">M. Jones</span>, <span class="refTitle">"The OAuth 2.0 Authorization Framework: JWT-Secured Authorization Request (JAR)"</span>, <span class="seriesInfo">RFC 9101</span>, <span class="seriesInfo">DOI 10.17487/RFC9101</span>, <time datetime="2021-08" class="refDate">August 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9101">https://www.rfc-editor.org/info/rfc9101</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9126">[RFC9126]</dt>
    <dd>
<span class="refAuthor">Lodderstedt, T.</span>, <span class="refAuthor">Campbell, B.</span>, <span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Tonge, D.</span>, and <span class="refAuthor">F. Skokan</span>, <span class="refTitle">"OAuth 2.0 Pushed Authorization Requests"</span>, <span class="seriesInfo">RFC 9126</span>, <span class="seriesInfo">DOI 10.17487/RFC9126</span>, <time datetime="2021-09" class="refDate">September 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9126">https://www.rfc-editor.org/info/rfc9126</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-12">
      <h2 id="name-translation-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-translation-references" class="section-name selfRef">Translation References</a>
      </h2>
<dl class="references">
<dt id="oidfj">[oidfj]</dt>
      <dd>
<span class="refAuthor">OpenID ファウンデーションジャパン</span>, <span class="refTitle">"OpenID ファウンデーションジャパン"</span>, <span>&lt;<a href="https://www.openid.or.jp">https://www.openid.or.jp</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="oidfj-trans">[oidfj-trans]</dt>
      <dd>
<span class="refAuthor">OpenID ファウンデーションジャパン</span>, <span class="refTitle">"翻訳・教育ワーキンググループ"</span>, <span>&lt;<a href="http://openid-foundation-japan.github.com/">http://openid-foundation-japan.github.com/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="oidfj-kycwg">[oidfj-kycwg]</dt>
      <dd>
<span class="refAuthor">OpenID ファウンデーションジャパン</span>, <span class="refTitle">"KYC ワーキンググループ"</span>, <span>&lt;<a href="https://www.openid.or.jp">https://www.openid.or.jp</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="oidfj-github">[oidfj-github]</dt>
    <dd>
<span class="refAuthor">OpenID ファウンデーションジャパン</span>, <span class="refTitle">"Github レポジトリー"</span>, <span>&lt;<a href="https://github.com/openid-foundation-japan">https://github.com/openid-foundation-japan</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="Acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">The OpenID Foundation Working Group developed the the concept described in the initial contribution to this specification with including Daniel Fett, Mark Haine, Takahiko Kawasaki, Kai Lehmann who all committed to the early drafts.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">We would also like to thank Alberto Pulido, Torsten Lodderstedt, Kristina Yasuda, Kosuke Koiwai, Joseph Heenan, Mike Jones, Dima Postnikov, and Nat Sakimura for their valuable feedback and contributions that helped to evolve this specification.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="notices">
<section id="appendix-B">
      <h2 id="name-notices">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-notices" class="section-name selfRef">Notices</a>
      </h2>
<p id="appendix-B-1">Copyright (c) 2024 The OpenID Foundation.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<p id="appendix-B-2">The OpenID Foundation (OIDF) grants to any Contributor, developer, implementer, or other interested party a non-exclusive, royalty free, worldwide copyright license to reproduce, prepare derivative works from, distribute, perform and display, this Implementers Draft or Final Specification solely for the purposes of (i) developing specifications, and (ii) implementing Implementers Drafts and Final Specifications based on such documents, provided that attribution be made to the OIDF as the source of the material, but that such attribution does not indicate an endorsement by the OIDF.<a href="#appendix-B-2" class="pilcrow">¶</a></p>
<p id="appendix-B-3">The technology described in this specification was made available from contributions from various sources, including members of the OpenID Foundation and others. Although the OpenID Foundation has taken steps to help ensure that the technology is available for distribution, it takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this specification or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any independent effort to identify any such rights. The OpenID Foundation and the contributors to this specification make no (and hereby expressly disclaim any) warranties (express, implied, or otherwise), including implied warranties of merchantability, non-infringement, fitness for a particular purpose, or title, related to this specification, and the entire risk as to implementing this specification is assumed by the implementer. The OpenID Intellectual Property Rights policy requires contributors to offer a patent promise not to assert certain patent claims against other contributors and against implementers. The OpenID Foundation invites any interested party to bring to its attention any copyrights, patents, patent applications, or other proprietary rights that may cover technology that may be required to practice this specification.<a href="#appendix-B-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="document-history">
<section id="appendix-C">
      <h2 id="name-document-history">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-document-history" class="section-name selfRef">Document History</a>
      </h2>
<p id="appendix-C-1">[[ To be removed from the final specification ]]<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<p id="appendix-C-2">-01
   *  Updated Syntax to resolve race condition that led to non-deterministic results
   *  various editorial updates<a href="#appendix-C-2" class="pilcrow">¶</a></p>
<p id="appendix-C-3">-00<a href="#appendix-C-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-C-4.1">first version<a href="#appendix-C-4.1" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="translator">
<section id="appendix-D">
      <h2 id="name-translator">
<a href="#appendix-D" class="section-number selfRef">Appendix D. </a><a href="#name-translator" class="section-name selfRef">Translator</a>
      </h2>
<p id="appendix-D-1">本仕様の翻訳は, OpenID ファウンデーションジャパン <span>[<a href="#oidfj" class="cite xref">oidfj</a>]</span> KYC ワーキンググループ <span>[<a href="#oidfj-kycwg" class="cite xref">oidfj-kycwg</a>]</span>, 翻訳・教育ワーキンググループ <span>[<a href="#oidfj-trans" class="cite xref">oidfj-trans</a>]</span> を主体として, 有志のメンバーによって行われました.
質問や修正依頼などについては, Github レポジトリー <span>[<a href="#oidfj-github" class="cite xref">oidfj-github</a>]</span> にご連絡ください.<a href="#appendix-D-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-2.1">Muneomi Sakuta (SoftBank Corp.)<a href="#appendix-D-2.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="appendix-D-2.2">Yuu Kikuchi (OPTiM Corp.)<a href="#appendix-D-2.2" class="pilcrow">¶</a>
</li>
        <li class="compact" id="appendix-D-2.3">Nov Matake (YAuth.jp)<a href="#appendix-D-2.3" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Daniel Fett</span></div>
<div dir="auto" class="left"><span class="org">Authlete</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mail@danielfett.de" class="email">mail@danielfett.de</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
